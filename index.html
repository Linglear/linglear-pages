<!DOCTYPE html>
<html>
<head>
  <style>
    body { 
      font-family: Arial; 
      text-align: center; 
      padding: 20px;
      background-color: #f5f5f5;
    }
    #status {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border-radius: 5px;
      display: inline-block;
    }
  </style>
</head>
<body>
  <h2>Linglear Authentication</h2>
  <div id="status">Processing login...</div>

  <script>
    // Extract tokens from URL hash
    const hashParams = new URLSearchParams(window.location.hash.substring(1));
    const idToken = hashParams.get('id_token');
    const accessToken = hashParams.get('access_token');

    if (idToken) {
      document.getElementById('status').textContent = 'Login successful! Completing authentication...';
      
      // Create hidden iframe to communicate with extension
      const iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      iframe.src = `chrome-extension://nnggnfmfndfnajfkjllffjailhgbbokn/callback.html#` +
        `id_token=${encodeURIComponent(idToken)}&` +
        `access_token=${encodeURIComponent(accessToken || '')}`;
      
      document.body.appendChild(iframe);
      
      // Close window after short delay
      setTimeout(() => window.close(), 1000);
    } else {
      document.getElementById('status').textContent = 'Login failed - no tokens received';
    }
  </script>
</body>
</html>
